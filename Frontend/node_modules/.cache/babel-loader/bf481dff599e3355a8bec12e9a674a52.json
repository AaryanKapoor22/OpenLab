{"ast":null,"code":"var _jsxFileName = \"/Users/aaryankapoor/Downloads/FRONTENDFINAL/OpenLab/Frontend/src/table.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport TableBody from \"./components/tableBody\";\nimport TableHead from \"./components/tableHead\";\nimport { getRecipes, deleteRecipe, saveRecipe } from \"./services/recipesService\";\nimport auth from \"./services/authService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Table = () => {\n  _s();\n\n  const [recipes, setRecipes] = useState([]);\n  const [query, setQuery] = useState(\"\");\n  const [rerender, setRerender] = useState(false);\n  useEffect(() => {\n    if (!auth.getCurrentUser()) {\n      console.log(\"no user\");\n      window.location = \"/login\";\n    }\n\n    async function fetchData() {\n      const {\n        data\n      } = await getRecipes();\n      console.log(data);\n      setRecipes(data);\n    }\n\n    fetchData();\n  }, []);\n\n  const handleSearch = event => {\n    setQuery(event.target.value);\n  };\n\n  const handleLike = recipe => {\n    const index = recipes.indexOf(recipe);\n    let newRecipes = recipes;\n    newRecipes[index].liked = !newRecipes[index].liked;\n    setRecipes(newRecipes);\n    setRerender(!rerender);\n  };\n\n  const handleDelete = async recipe => {\n    console.log(recipe);\n    const newRecipes = recipes.filter(p => p._id !== recipe._id);\n    setRecipes(newRecipes);\n\n    try {\n      await deleteRecipe(recipe._id);\n    } catch (ex) {\n      console.log(\"delete exception\");\n\n      if (ex.respond && ex.respond.status === 404) {\n        alert(\"Recipe has already been deleted !\");\n        setRecipes(recipes);\n      }\n    }\n  };\n\n  const handleAdd = async () => {\n    const NewRecipe = {\n      name: \"Chicken Salad\",\n      description: \"Chicken Salad with cheese\"\n    };\n    const {\n      data: recipe\n    } = await saveRecipe(NewRecipe);\n    console.log(recipe);\n    const newRecipes = [recipe, ...recipes];\n    setRecipes(newRecipes);\n  };\n\n  const filterrecipeByName = () => {\n    if (query) {\n      const filtered = recipes.filter(p => p.name.toLowerCase().startsWith(query.toLowerCase()));\n      return filtered;\n    }\n\n    return recipes;\n  };\n\n  const filteredRecipes = filterrecipeByName();\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"search\",\n      placeholder: \"Search by Name\",\n      value: query,\n      onChange: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: handleAdd,\n      children: \"Add\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table\",\n      children: [/*#__PURE__*/_jsxDEV(TableHead, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n        recipes: filteredRecipes,\n        onDelete: handleDelete,\n        onLike: handleLike\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Table, \"oRtM2btwqnzj+ZhmRIewx5YIgSY=\");\n\n_c = Table;\nexport default Table;\n\nvar _c;\n\n$RefreshReg$(_c, \"Table\");","map":{"version":3,"sources":["/Users/aaryankapoor/Downloads/FRONTENDFINAL/OpenLab/Frontend/src/table.jsx"],"names":["React","useEffect","useState","TableBody","TableHead","getRecipes","deleteRecipe","saveRecipe","auth","Table","recipes","setRecipes","query","setQuery","rerender","setRerender","getCurrentUser","console","log","window","location","fetchData","data","handleSearch","event","target","value","handleLike","recipe","index","indexOf","newRecipes","liked","handleDelete","filter","p","_id","ex","respond","status","alert","handleAdd","NewRecipe","name","description","filterrecipeByName","filtered","toLowerCase","startsWith","filteredRecipes"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport TableBody from \"./components/tableBody\";\r\nimport TableHead from \"./components/tableHead\";\r\nimport {\r\n  getRecipes,\r\n  deleteRecipe,\r\n  saveRecipe,\r\n} from \"./services/recipesService\";\r\nimport auth from \"./services/authService\";\r\n\r\nconst Table = () => {\r\n  const [recipes, setRecipes] = useState([]);\r\n  const [query, setQuery] = useState(\"\");\r\n  const [rerender, setRerender] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!auth.getCurrentUser()) {\r\n      console.log(\"no user\");\r\n      window.location = \"/login\";\r\n    }\r\n    async function fetchData() {\r\n      const { data } = await getRecipes();\r\n      console.log(data);\r\n      setRecipes(data);\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleSearch = (event) => {\r\n    setQuery(event.target.value);\r\n  };\r\n  const handleLike = (recipe) => {\r\n    const index = recipes.indexOf(recipe);\r\n    let newRecipes = recipes;\r\n    newRecipes[index].liked = !newRecipes[index].liked;\r\n    setRecipes(newRecipes);\r\n    setRerender(!rerender);\r\n  };\r\n\r\n  const handleDelete = async (recipe) => {\r\n    console.log(recipe);\r\n    const newRecipes = recipes.filter((p) => p._id !== recipe._id);\r\n\r\n    setRecipes(newRecipes);\r\n    try {\r\n      await deleteRecipe(recipe._id);\r\n    } catch (ex) {\r\n      console.log(\"delete exception\");\r\n      if (ex.respond && ex.respond.status === 404) {\r\n        alert(\"Recipe has already been deleted !\");\r\n        setRecipes(recipes);\r\n      }\r\n    }\r\n  };\r\n  const handleAdd = async () => {\r\n    const NewRecipe = {\r\n      name: \"Chicken Salad\",\r\n      description: \"Chicken Salad with cheese\",\r\n    };\r\n    const { data: recipe } = await saveRecipe(NewRecipe);\r\n    console.log(recipe);\r\n    const newRecipes = [recipe, ...recipes];\r\n    setRecipes(newRecipes);\r\n  };\r\n  const filterrecipeByName = () => {\r\n    if (query) {\r\n      const filtered = recipes.filter((p) =>\r\n        p.name.toLowerCase().startsWith(query.toLowerCase())\r\n      );\r\n      return filtered;\r\n    }\r\n    return recipes;\r\n  };\r\n\r\n  const filteredRecipes = filterrecipeByName();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <input\r\n        type=\"text\"\r\n        className=\"form-control\"\r\n        name=\"search\"\r\n        placeholder=\"Search by Name\"\r\n        value={query}\r\n        onChange={handleSearch}\r\n      />\r\n      <button className=\"btn btn-primary\" onClick={handleAdd}>\r\n        Add\r\n      </button>\r\n      <table className=\"table\">\r\n        <TableHead />\r\n\r\n        <TableBody\r\n          recipes={filteredRecipes}\r\n          onDelete={handleDelete}\r\n          onLike={handleLike}\r\n        />\r\n      </table>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n"]},"metadata":{},"sourceType":"module"}